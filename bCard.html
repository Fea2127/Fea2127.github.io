<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Macaroon Birthday Card</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;800&family=Fredoka+One&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
  <style>
    :root {
      --card-w: 700px;
      --card-h: 450px;
      --macaroon-pink: #FFB6C1;
      --macaroon-blue: #ADD8E6;
      --macaroon-yellow: #FFFACD;
      --macaroon-green: #98FB98;
      --macaroon-purple: #DDA0DD;
      --gold: #FFD700;
      --dark-bg: #1a1a2e;
      --dark-card: #16213e;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      display: flex; align-items: center; justify-content: center;
      min-height: 100vh; 
      background: var(--dark-bg);
      font-family: 'Comic Neue', cursive, sans-serif;
      overflow: hidden;
      padding: 20px;
      color: white;
    }

    /* Container for the card and poppers */
    .card-container {
      position: relative;
      width: var(--card-w);
      height: var(--card-h);
    }

    /* Single front page */
    .front-page {
      width: var(--card-w);
      height: var(--card-h);
      position: relative;
      border: 6px solid var(--gold);
      border-radius: 20px;
      background: linear-gradient(135deg, var(--macaroon-pink), var(--macaroon-purple));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 20;
      box-shadow: 0 15px 35px rgba(0,0,0,0.5);
    }
    
    .front-page h1 {
      font-family: 'Fredoka One', cursive;
      font-size: 60px;
      color: white;
      text-shadow: 3px 3px 0 rgba(0,0,0,0.3);
      margin-bottom: 15px;
      letter-spacing: 2px;
    }
    
    .front-page .name {
      font-family: 'Fredoka One', cursive;
      font-size: 32px;
      color: var(--gold);
      text-shadow: 2px 2px 0 rgba(0,0,0,0.3);
      margin-top: 10px;
    }
    
    /* Party poppers outside the card */
    .party-popper {
      position: absolute;
      width: 60px;
      height: 80px;
      z-index: 5;
      opacity: 0;
      animation: pop 3s infinite;
    }
    
    .party-popper-1 { top: -100px; left: 20%; animation-delay: 0s; }
    .party-popper-2 { top: -100px; left: 50%; animation-delay: 0.8s; }
    .party-popper-3 { top: -100px; right: 20%; animation-delay: 1.6s; }
    .party-popper-4 { bottom: -100px; left: 20%; animation-delay: 0.4s; }
    .party-popper-5 { bottom: -100px; right: 20%; animation-delay: 1.2s; }
    
    .popper-body {
      position: absolute;
      bottom: 0;
      width: 40px;
      height: 60px;
      background: var(--macaroon-purple);
      border-radius: 20px 20px 5px 5px;
      left: 50%;
      transform: translateX(-50%);
      box-shadow: 0 4px 0 rgba(0,0,0,0.3);
    }
    
    .popper-cone {
      position: absolute;
      bottom: 60px;
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 30px solid var(--macaroon-yellow);
      left: 50%;
      transform: translateX(-50%);
    }
    
    .confetti-stream {
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 0;
      background: linear-gradient(to bottom, 
        var(--macaroon-pink) 20%, 
        var(--macaroon-blue) 40%, 
        var(--macaroon-yellow) 60%, 
        var(--macaroon-green) 80%, 
        var(--macaroon-purple) 100%);
      opacity: 0;
    }
    
    @keyframes pop {
      0% {
        opacity: 0;
        transform: translateY(0);
      }
      10% {
        opacity: 1;
        transform: translateY(-30px);
      }
      20% {
        opacity: 1;
        transform: translateY(-60px);
      }
      30% {
        opacity: 1;
        transform: translateY(-90px);
      }
      40% {
        opacity: 1;
        transform: translateY(-120px);
      }
      50% {
        opacity: 0;
        transform: translateY(-150px);
      }
      100% {
        opacity: 0;
        transform: translateY(-150px);
      }
    }
    
    /* Book state (hidden initially) */
    .book {
      width: var(--card-w);
      height: var(--card-h);
      perspective: 2200px;
      position: relative;
      border: 6px solid var(--gold);
      border-radius: 20px;
      background: var(--dark-card);
      overflow: hidden;
      display: none;
      z-index: 20;
      box-shadow: 0 15px 35px rgba(0,0,0,0.5);
    }
    
    /* Inside pages */
    .inside-left, .inside-right {
      position: absolute;
      top: 0; height: 100%; width: 50%;
      background: linear-gradient(180deg, var(--dark-card), #0f172a);
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      padding: 30px; 
      text-align: center;
      visibility: hidden;
      z-index: 10;
      color: white;
    }
    .inside-left { left: 0; border-right: 2px dashed var(--gold); }
    .inside-right { right: 0; border-left: 2px dashed var(--gold); }
    .book.open .inside-left, .book.open .inside-right { visibility: visible; }

    .inside-left h2 { 
      font-family: 'Fredoka One', cursive; 
      font-size: 42px; 
      margin-bottom: 20px; 
      color: var(--macaroon-pink);
      text-shadow: 2px 2px 0 rgba(0,0,0,0.3);
      letter-spacing: 1px;
    }
    .inside-left p { 
      color: #e2e8f0; 
      line-height: 1.5; 
      max-width: 90%;
      font-size: 20px;
      font-weight: bold;
    }

    /* Covers */
    .cover-left, .cover-right {
      position: absolute; 
      top: 0; 
      height: 100%; 
      width: 50%;
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      justify-content: center;
      font-weight: bold; 
      font-size: 2.5em; 
      color: white;
      background: linear-gradient(135deg, var(--macaroon-pink), var(--macaroon-blue));
      cursor: pointer;
      font-family: 'Fredoka One', cursive;
      text-shadow: 2px 2px 0 rgba(0,0,0,0.3);
      box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
    }
    .cover-left { 
      left: 0; 
      border-radius: 20px 0 0 20px; 
      background: linear-gradient(135deg, var(--macaroon-pink), var(--macaroon-purple));
    }
    .cover-right { 
      right: 0; 
      border-radius: 0 20px 20px 0; 
      transform-origin: left center; 
      transform-style: preserve-3d; 
      backface-visibility: hidden; 
      transition: transform 1s cubic-bezier(.2,.9,.2,1); 
      z-index: 2; 
      background: linear-gradient(135deg, var(--macaroon-blue), var(--macaroon-green));
    }
    .cover-right .name { 
      color: var(--gold); 
      font-weight: 800; 
      font-size: 28px; 
      margin-top: 15px;
      text-shadow: 1px 1px 0 rgba(0,0,0,0.3);
    }

    /* Hide left cover when open */
    .book.open .cover-left { visibility: hidden; }

    /* Flip */
    .book.open .cover-right { transform: rotateY(-180deg); }

    /* Gift & Cake */
    .gift {
      position: relative;
      width: 180px; 
      height: 180px;
      background: var(--macaroon-purple);
      border-radius: 20px;
      display: flex; 
      align-items: center; 
      justify-content: center;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
      transition: all 0.5s ease;
    }
    .gift::before, .gift::after { 
      content: ""; 
      position: absolute; 
      background: var(--gold); 
      border-radius: 10px;
    }
    .gift::before { 
      width: 30px; 
      height: 100%; 
      left: 50%; 
      top: 0; 
      transform: translateX(-50%); 
    }
    .gift::after { 
      height: 30px; 
      width: 100%; 
      top: 50%; 
      left: 0; 
      transform: translateY(-50%); 
    }
    .gift.open { 
      background: transparent; 
      transform: scale(0.8);
    }
    .gift.open::before, .gift.open::after { display: none; }

    .cake {
      position: absolute;
      bottom: -280px; 
      left: 50%; 
      transform: translateX(-50%);
      width: 160px; 
      opacity: 0;
      transition: bottom 0.8s ease, opacity 0.3s ease;
    }
    .gift.open .cake { 
      bottom: 20px; 
      opacity: 1; 
    }

    .layer { 
      height: 40px; 
      border-radius: 10px; 
      margin-bottom: 8px; 
      position: relative; 
      box-shadow: 0 3px 5px rgba(0,0,0,0.2);
    }
    .layer.l1 { 
      width: 75%; 
      background: var(--macaroon-pink); 
      margin: 0 auto; 
      border: 3px solid var(--macaroon-yellow);
    }
    .layer.l2 { 
      width: 90%; 
      background: var(--macaroon-blue); 
      margin: 0 auto; 
      border: 3px solid var(--macaroon-yellow);
    }
    .layer.l3 { 
      width: 100%; 
      background: var(--macaroon-green); 
      border: 3px solid var(--macaroon-yellow);
    }
    .frosting { 
      position: absolute; 
      left: 0; 
      bottom: 0; 
      width: 100%; 
      height: 12px; 
      background: var(--macaroon-yellow); 
      border-radius: 50%; 
    }

    .candles { 
      display: flex; 
      gap: 15px; 
      justify-content: center; 
      margin-top: -15px; 
    }
    .candle { 
      width: 12px; 
      height: 30px; 
      background: var(--macaroon-purple); 
      border-radius: 4px; 
      position: relative; 
      border: 2px solid var(--gold);
    }
    .flame {
      width: 16px; 
      height: 24px; 
      position: absolute; 
      top: -22px; 
      left: -2px; 
      border-radius: 50%;
      background: radial-gradient(circle at center, #FFD700 40%, #FFA500 90%);
      animation: flicker 0.3s infinite alternate;
      box-shadow: 0 0 15px #FFD700;
    }
    @keyframes flicker { 
      from { transform: rotate(-8deg) scale(1); } 
      to { transform: rotate(8deg) scale(1.1); } 
    }

    .celebrate {
      margin-top: 25px; 
      padding: 14px 25px;
      background: var(--macaroon-pink); 
      color: white; 
      border: 0; 
      border-radius: 50px;
      cursor: pointer; 
      transition: all 0.3s;
      font-family: 'Fredoka One', cursive;
      font-size: 22px;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      letter-spacing: 1px;
    }
    .celebrate:hover { 
      background: var(--macaroon-blue); 
      transform: scale(1.05);
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }

    /* Confetti */
    .confetti { 
      position: absolute; 
      width: 12px; 
      height: 12px; 
      border-radius: 50%; 
      opacity: 1; 
      z-index: 1100; 
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      :root {
        --card-w: 95vw;
        --card-h: 60vh;
      }
      .front-page h1 {
        font-size: 40px;
      }
      .front-page .name {
        font-size: 24px;
      }
      .party-popper {
        width: 40px;
        height: 60px;
      }
      .popper-body {
        width: 30px;
        height: 45px;
      }
      .popper-cone {
        border-left: 15px solid transparent;
        border-right: 15px solid transparent;
        border-bottom: 22px solid var(--macaroon-yellow);
      }
    }
  </style>
</head>
<body>
  <!-- Particle -->
   <canvas id="particles"></canvas>
  <!-- Container for card and poppers -->
  <div class="card-container">
    <!-- Party poppers outside the card -->
    <div class="party-popper party-popper-1">
      <div class="popper-body"></div>
      <div class="popper-cone"></div>
    </div>
    <div class="party-popper party-popper-2">
      <div class="popper-body"></div>
      <div class="popper-cone"></div>
    </div>
    <div class="party-popper party-popper-3">
      <div class="popper-body"></div>
      <div class="popper-cone"></div>
    </div>
    <div class="party-popper party-popper-4">
      <div class="popper-body"></div>
      <div class="popper-cone"></div>
    </div>
    <div class="party-popper party-popper-5">
      <div class="popper-body"></div>
      <div class="popper-cone"></div>
    </div>
    
    <!-- Single front page -->
    <div class="front-page" id="frontPage">
      <h1>HAPPY BIRTHDAY!</h1>
      <div class="name">SWEETIE</div>
    </div>

    <!-- Book state (hidden initially) -->
    <div class="book" id="book">
      <!-- Covers -->
      <div class="cover-left">HAPPY</div>
      <div class="cover-right">BIRTHDAY <div class="name">SWEETIE</div></div>

      <!-- Inside Pages -->
      <div class="inside-left">
        <h2>Happy Birthday!</h2>
        <p>Wishing you a super fun day filled with cupcakes, giggles, and all your favorite things!</p>
      </div>
      <div class="inside-right">
        <div class="gift" id="gift">
          <div class="cake">
            <div class="candles">
              <div class="candle"><div class="flame"></div></div>
              <div class="candle"><div class="flame"></div></div>
              <div class="candle"><div class="flame"></div></div>
            </div>
            <div class="layer l1"><div class="frosting"></div></div>
            <div class="layer l2"><div class="frosting"></div></div>
            <div class="layer l3"><div class="frosting"></div></div>
          </div>
        </div>
        <button class="celebrate" id="celebrateBtn">Celebrate 🎉</button>
      </div>
    </div>
  </div>

  <script>
    const frontPage = document.getElementById('frontPage');
    const book = document.getElementById('book');
    const gift = document.getElementById('gift');
    const celebrateBtn = document.getElementById('celebrateBtn');

    // Switch from front page to book when clicked
    frontPage.addEventListener('click', () => {
      frontPage.style.display = 'none';
      book.style.display = 'block';
      
      // Trigger the book open animation after a short delay
      setTimeout(() => {
        book.classList.add('open');
      }, 100);
    });

    // Toggle open/close for the book
    book.addEventListener('click', e => {
      if (e.target === celebrateBtn || gift.contains(e.target)) return;
      book.classList.toggle('open');
      if (!book.classList.contains('open')) gift.classList.remove('open');
    });

    // Celebrate button
    celebrateBtn.addEventListener('click', e => {
      e.stopPropagation();
      gift.classList.add('open');
      // Confetti burst
      for (let i = 0; i < 100; i++) {
        const c = document.createElement('div');
        c.className = 'confetti';
        c.style.left = Math.random()*100 + 'vw';
        c.style.top = '-20px';
        c.style.background = [
          'var(--macaroon-pink)', 
          'var(--macaroon-blue)', 
          'var(--macaroon-yellow)', 
          'var(--macaroon-green)', 
          'var(--macaroon-purple)'
        ][Math.floor(Math.random()*5)];
        c.style.width = c.style.height = (8+Math.random()*12)+'px';
        document.body.appendChild(c);
        const dx = (Math.random()*200 - 100) + 'px';
        const dy = (window.innerHeight+100) + 'px';
        const rot = (Math.random()*720)+'deg';
        c.style.transition = `transform 2.5s cubic-bezier(0,0.5,0.5,1), opacity 2.5s`;
        requestAnimationFrame(()=> { 
          c.style.transform=`translate(${dx},${dy}) rotate(${rot})`; 
          c.style.opacity='0'; 
        });
        setTimeout(()=>c.remove(),2600);
      }
    });
    // --- Particle Animation Background ---
    const canvas = document.getElementById("particles");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    class Particle {
      constructor() {
        this.reset();
      }
      reset() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 3 + 1;
        this.speedX = (Math.random() - 0.5) * 4;
        this.speedY = Math.random() * 6 + 2;
        this.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
      }
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        if (this.y > canvas.height || this.x < 0 || this.x > canvas.width) {
          this.reset();
          this.y = 0;
        }
      }
      draw() {
        ctx.beginPath();
        ctx.fillStyle = this.color;
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    const particlesArray = [];
    for (let i = 0; i < 150; i++) {
      particlesArray.push(new Particle());
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particlesArray.forEach(particle => {
        particle.update();
        particle.draw();
      });
      requestAnimationFrame(animate);
    }

    animate();

    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>